<!DOCTYPE html>
<html lang="en">
<head>
            <title>Cyclopy - Minimal installation of Fedora with X</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Author -->
        <meta name="author" content="Marc-Aurele Coste">

        <!-- Foundation CSS -->
        <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.5.3/dist/css/foundation.min.css" integrity="sha256-xpOKVlYXzQ3P03j397+jWFZLMBXLES3IiryeClgU5og= sha384-gP4DhqyoT9b1vaikoHi9XQ8If7UNLO73JFOOlQV1RATrA7D0O7TjJZifac6NwPps sha512-AKwIib1E+xDeXe0tCgbc9uSvPwVYl6Awj7xl0FoaPFostZHOuDQ1abnDNCYtxL/HWEnVOMrFyf91TDgLPi9pNg==" crossorigin="anonymous"> -->

        <!-- Bootstrap -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <!-- FontAwesome -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

        <!-- Theme CSS -->
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!-- IE -->
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->






        <meta name="tags" content="Fedora" />
        <meta name="tags" content="Installation" />
        <meta name="tags" content="Configuration" />

</head>

<body id="index" class="d-flex flex-column h-100">

    <header>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="/">Cyclopy</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav mr-auto">
                    


                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">Catégories</a>
                        <div class="dropdown-menu" aria-labelledby="dropdown01">
                                <a class="dropdown-item" href="/category/developpement.html">Développement</a>
                                <a class="dropdown-item" href="/category/linux.html">Linux</a>
                        </div>
                    </li>

                </ul>
            </div>

        </nav>
    </header>

    <main role="main" class="flex-shrink-0">
        <div class="container">

<article class="hentry">
    <header>
        <h2 class="entry-title">
            <a href="/drafts/fedora-installation-en.html" rel="bookmark" title="Permalink to Minimal installation of Fedora with X">
                Minimal installation of Fedora with X
            </a>
        </h2>

        
    </header>

    <footer class="post-info">
        <time class="published" datetime="2019-02-12T20:35:00+01:00">
            Tue 12 February 2019
        </time>

        <time class="modified" datetime="2019-02-12T20:35:00+01:00">
            Tue 12 February 2019
        </time>

        <div class="category">
            Category: <a href="/category/linux.html">Linux</a>
        </div>

        <div class="tags">
            Tags:
            <a href="/tag/fedora.html">Fedora</a>
            <a href="/tag/installation.html">Installation</a>
            <a href="/tag/configuration.html">Configuration</a>
        </div>
    </footer><!-- /.post-info -->

    <div class="entry-content">
        <p>In this post I will detail the steps for a minimal installation that allow you to boot and start an X session with a
simple window manager (I choose QTile). This is a simple excercice because Fedora has a very good graphical installer
realy easy to use.</p>
<p>In a second time we will quickly move on the few files and configurations to have a more functional system.</p>
<div class="section" id="bootable-media">
<h2>Bootable media</h2>
<p>The first things to do is to download the ISO of Fedora (netinstall version) and to create the bootable USB we can use
the following command with elevated privileges (sudo or as root user):</p>
<div class="highlight"><pre><span></span>dd <span class="k">if</span><span class="o">=</span>path/to/iso <span class="nv">of</span><span class="o">=</span>/path/to/device.
</pre></div>
<p>If you don't want to use dd, cannot use dd because you are on Windows, or want a graphical interface, you can use the
following:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Windows:</th><td class="field-body"><a class="reference external" href="https://rufus.ie/">rufus</a> | <a class="reference external" href="https://unetbootin.github.io/">unetbootin</a></td>
</tr>
<tr class="field"><th class="field-name">Linux:</th><td class="field-body"><a class="reference external" href="https://unetbootin.github.io/">unetbootin</a></td>
</tr>
<tr class="field"><th class="field-name">MacOS:</th><td class="field-body"><a class="reference external" href="https://unetbootin.github.io/">unetbootin</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="installation">
<h2>Installation</h2>
<p>Here nothing complicated. We boot on the key and we follow the steps.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We are using a <em>netinstall</em> version so we need an internet connection (Wi-Fi or wired).</p>
</div>
<img alt="choose language screen" class="responsive-images align-center" src="/static/images/fedora_installation/choose_language.png" />
<p>We choose the lang, I choose english by default, but use your prefered language and we will also set the keyboard
layout.</p>
<p>We now arrive to the main menu of the installer.</p>
<img alt="main screen" class="responsive-images align-center" src="/static/images/fedora_installation/main.png" />
<p>Important thing to do : choose where we want to install our distribution (Installation Destination). For the partitions
you can let the system do that for you.</p>
<img alt="select installation destination screen" class="responsive-images align-center" src="/static/images/fedora_installation/select_drive.png" />
<p>And the second thing to do is to select the installation type in the <strong>Sofware Selection</strong> entry. Of course we select
the <em>minimal install</em> and that's it.</p>
<img alt="select software screen" class="responsive-images align-center" src="/static/images/fedora_installation/software_selection.png" />
<p>On peut maintenant lancer le processus d'installation avec le bouton <em>begin installation</em> qui devrait être disponible.</p>
<div class="section" id="installation-en-wi-fi">
<h3>Installation en Wi-Fi</h3>
<p>Pour ceux qui ont fait une installation en Wi-Fi il vous faut installer les drivers de votre carte wi-fi et aussi ajouter à NetworkManager le support du wi-fi (et du bluetooth).</p>
<p>Pour cela on reboot à nouveau sur sa clé USB et on procède de la manière suivante.</p>
<div class="highlight"><pre><span></span><span class="c1"># Permet de récupérer le nom du volume groupe (ici fedora)</span>
vgscan
<span class="c1"># Permet d&#39;activer le volume groupe</span>
vgchange -ay fedora
<span class="c1"># Permet de vérifier que le volume groupe est bien activé</span>
lvscan

<span class="c1"># On crée un dossier qui nous servira de point de montage et on monte le volume root (fedora-root)</span>
mkdir /mnt/fedora
mount /dev/mapper/fedora-root /mnt/fedora
<span class="nb">cd</span> /mnt/fedora

<span class="c1"># On monte les dossiers importants pour le fonctionnement du chroot</span>
mount -o <span class="nb">bind</span> /dev dev
mount -o <span class="nb">bind</span> /proc proc
mount -o <span class="nb">bind</span> /sys sys
mount -t tmpfs tmpfs tmp

<span class="c1"># On chroot</span>
chroot /mnt/fedora

<span class="c1"># On installe les paquets nécessaires pour notre connexion Wi-Fi</span>
dnf install @<span class="s2">&quot;Hardware Support&quot;</span> @<span class="s2">&quot;Common NetworkManager Submodules&quot;</span> network-manager-applet
</pre></div>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration</h2>
<p>Fedora est installée !</p>
<p>Il faut maintenant régler quelques petits détails afin d'avoir une distribution prête à l'emploi. Il nous faut tout d'abord installer X ainsi qu'un window manager. Pour ma part ce sera <a class="reference external" href="http://www.qtile.org/">QTile</a>.</p>
<div class="section" id="installation-de-x-du-wm-et-quelques-autres-packets-utiles">
<h3>Installation de X, du WM et quelques autres packets utiles.</h3>
<p>On utilise DNF pour installer tout ce dont nous avons besoin.</p>
<div class="highlight"><pre><span></span><span class="c1"># groupinstall pour base-x</span>
sudo dnf groupinstall <span class="s1">&#39;base-x&#39;</span>
<span class="c1"># install classique pour le reste</span>
sudo dnf install qtile rxvt-unicode-256color w3m feh compton
</pre></div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">qtile:</th><td class="field-body">Notre window manager.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">rxvt-unicode-256color:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Notre terminal.</td>
</tr>
<tr class="field"><th class="field-name">w3m:</th><td class="field-body">Notre navigateur internet pour le moment. (Facultatif: on peut aussi installer directement Firefox si on veut. Moi, je préfère passer par les archives tar fournies par Mozilla.)</td>
</tr>
<tr class="field"><th class="field-name">feh:</th><td class="field-body">Va nous servir à définir une image en background.</td>
</tr>
<tr class="field"><th class="field-name">compton:</th><td class="field-body">Un compositor léger qui pemettra de supprimer le <a class="reference external" href="https://en.wikipedia.org/wiki/Screen_tearing">tearing</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rpms-fusion">
<h3>RPMs fusion</h3>
<p>Pour avoir accés à une liste plus complète de packets on installe les repos <a class="reference external" href="https://rpmfusion.org/">RPM fusion</a> <em>free</em> et <em>non free</em></p>
<div class="highlight"><pre><span></span>sudo dnf install https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-<span class="k">$(</span>rpm -E %fedora<span class="k">)</span>.noarch.rpm https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-<span class="k">$(</span>rpm -E %fedora<span class="k">)</span>.noarch.rpm
</pre></div>
</div>
<div class="section" id="finitions">
<h3>Finitions</h3>
<p>On commence par recupérer les fichiers <a class="reference external" href="https://gist.github.com/MarcAureleCoste/62094177c8f1c0239077b8cc541b427a">.xinitrc</a> et <a class="reference external" href="https://gist.github.com/MarcAureleCoste/2472133ba1ddcb3406dc972fe291a5f1">.Xresources</a> que l'on copie dans son <strong>home</strong>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">.xinitrc:</th><td class="field-body">Sert lorsqu'on lance la session X pour paramétrer les programmes qui doivent être exécutés et quel window manager lancer.</td>
</tr>
<tr class="field"><th class="field-name">.Xresources:</th><td class="field-body">Permet de configurer certaines applications et notamment rxvt-unicode-256color que nous avons installé un peu avant.</td>
</tr>
</tbody>
</table>
<p>Pour finir on récupère le <a class="reference external" href="https://gist.github.com/MarcAureleCoste/02c18d3bad74c85b5bcd3e415f2e01a9">fichier de configuration</a> de QTile et on le place dans le dossier suivant <em>~/.config/qtile/</em>.</p>
<p>On peut maintenant démarrer notre sessions X avec la commande</p>
<div class="highlight"><pre><span></span>startx
</pre></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Si vous n'avez pas encore le fichier <strong>.xinitrc</strong> dans votre <em>home</em> il faut passer en argument de <em>startx</em> le path absolue vers l'éxécutable de votre window manager (pour qtile <em>/usr/bin/qtile</em>).</p>
</div>
<p>Voilà, l'installation de Fedora est finie et nous avons une installation minimale parfaitement fonctionnelle.</p>
</div>
</div>

    </div><!-- /.entry-content -->
</article>



        </div>
    </main>

    <footer class="footer mt-auto py-3">
        <div class="container">
            <!-- <span class="text-muted">Place sticky footer content here.</span> -->
            <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of
                <a href="http://python.org">Python</a>.
            </address>
        </div>
    </footer>

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <!-- Popper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <!-- JQuery -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script> -->
    <!-- Foundation JS -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/foundation-sites@6.5.3/dist/js/foundation.min.js" integrity="sha256-/PFxCnsMh+nTuM0k3VJCRch1gwnCfKjaP8rJNq5SoBg= sha384-9ksAFjQjZnpqt6VtpjMjlp2S0qrGbcwF/rvrLUg2vciMhwc1UJJeAAOLuJ96w+Nj sha512-UMSn6RHqqJeJcIfV1eS2tPKCjzaHkU/KqgAnQ7Nzn0mLicFxaVhm9vq7zG5+0LALt15j1ljlg8Fp9PT1VGNmDw==" crossorigin="anonymous"></script> -->
    <!-- <script>
        $(document).foundation();
    </script> -->
</body>
</html>